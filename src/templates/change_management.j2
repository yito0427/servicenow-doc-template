# {{ project_name }} - 変更管理設計書

**バージョン:** {{ version }}  
**作成者:** {{ author.name }}  
**作成日:** {{ created_date | date_format }}  
**ドキュメントタイプ:** 変更管理設計書

---

## 1. 概要

### 1.1 目的
{{ process_overview.purpose }}

### 1.2 スコープ
{{ process_overview.scope }}

### 1.3 目標
{% for objective in process_overview.objectives %}
- {{ objective }}
{% endfor %}

### 1.4 期待される効果
{% for benefit in process_overview.benefits %}
- {{ benefit }}
{% endfor %}

---

## 2. 変更管理プロセス

### 2.1 変更管理プロセスフロー

```
[変更要求（RFC）作成]
　　　↓
[RFC記録・初期評価]
　　　↓
[変更タイプ判定] → 標準変更 → [自動承認] → [実装]
　　　↓                                        ↓
通常/重大変更                                   ↓
　　　↓                                        ↓
[技術評価・影響分析]                            ↓
　　　↓                                        ↓
[CAB評価] → 却下 → [RFC終了]                   ↓
　　　↓                                        ↓
　承認                                          ↓
　　　↓                                        ↓
[実装計画・スケジュール]                        ↓
　　　↓                                        ↓
[変更実装] ←──────────────────────────────────┘
　　　↓
[変更レビュー]
　　　↓
[RFC完了・文書化]
```

### 2.2 変更管理の原則

1. **すべての変更は記録される** - 変更の追跡可能性を確保
2. **リスクに応じた管理** - 変更のリスクレベルに応じた適切な評価と承認
3. **ビジネス優先** - ビジネス価値と緊急度に基づく優先順位付け
4. **標準化の推進** - 繰り返し実施される変更の標準化
5. **継続的改善** - 変更プロセスの定期的な見直しと最適化

### 2.3 変更の定義

| 項目 | 説明 |
|------|------|
| 変更 | ITサービスに直接的または間接的に影響を与える可能性のある、構成アイテム（CI）の追加、修正、削除 |
| 変更要求（RFC） | 変更を実施するための正式な提案 |
| 変更レコード | RFCと変更のライフサイクル全体の記録 |

---

## 3. 変更タイプと分類

### 3.1 変更タイプ定義

{% for change_type in change_types %}
#### {{ change_type.type }}
- **説明**: {{ change_type.description }}
- **承認**: {{ change_type.approval }}
- **リードタイム**: {{ change_type.lead_time }}
- **例**:
{% for example in change_type.examples %}
  - {{ example }}
{% endfor %}

{% endfor %}

### 3.2 変更カテゴリ

| カテゴリ | 説明 | サブカテゴリ |
|----------|------|--------------|
| インフラストラクチャ | ハードウェア、ネットワーク関連 | サーバー、ストレージ、ネットワーク機器 |
| ソフトウェア | OS、ミドルウェア、アプリケーション | パッチ、アップグレード、新規導入 |
| データベース | データベース関連の変更 | スキーマ変更、パフォーマンス調整、移行 |
| セキュリティ | セキュリティ関連の変更 | ポリシー変更、アクセス制御、脆弱性対応 |
| プロセス | 運用プロセスの変更 | 手順変更、自動化、ツール導入 |

### 3.3 優先度マトリクス

| 影響度＼緊急度 | 高 | 中 | 低 |
|----------------|-----|-----|-----|
| **高** | Priority 1 | Priority 2 | Priority 3 |
| **中** | Priority 2 | Priority 3 | Priority 4 |
| **低** | Priority 3 | Priority 4 | Priority 5 |

---

## 4. 変更諮問委員会（CAB）

### 4.1 通常CAB

{% if cab_structure.regular_cab %}
- **目的**: {{ cab_structure.regular_cab.purpose }}
- **開催頻度**: {{ cab_structure.regular_cab.frequency }}
- **議長**: {{ cab_structure.regular_cab.chair }}

**コアメンバー**:
{% for member in cab_structure.regular_cab.core_members %}
- {{ member }}
{% endfor %}

**オプショナルメンバー**:
{% for member in cab_structure.regular_cab.optional_members %}
- {{ member }}
{% endfor %}
{% endif %}

### 4.2 緊急CAB（ECAB）

{% if cab_structure.emergency_cab %}
- **目的**: {{ cab_structure.emergency_cab.purpose }}
- **開催頻度**: {{ cab_structure.emergency_cab.frequency }}
- **議長**: {{ cab_structure.emergency_cab.chair }}

**最小構成メンバー**:
{% for member in cab_structure.emergency_cab.minimum_members %}
- {{ member }}
{% endfor %}
{% endif %}

### 4.3 CABアジェンダ

{% if cab_structure.cab_agenda %}
{% for item in cab_structure.cab_agenda %}
{{ loop.index }}. {{ item }}
{% endfor %}
{% endif %}

### 4.4 CAB決定基準

| 決定 | 条件 | 次のアクション |
|------|------|----------------|
| 承認 | リスク評価完了、実装計画明確、リソース確保 | 実装スケジュール確定 |
| 条件付き承認 | 追加対策や情報が必要 | 条件クリア後に実装 |
| 延期 | 準備不足、リソース不足 | 次回CABで再評価 |
| 却下 | リスクが高すぎる、ビジネス価値が不明確 | RFC見直しまたは終了 |

---

## 5. 変更評価とリスク分析

### 5.1 リスク評価要因

{% for factor in risk_assessment.risk_factors %}
#### {{ factor.factor }} (重み: {{ factor.weight }}%)
レベル:
{% for level in factor.levels %}
- {{ level }}
{% endfor %}

{% endfor %}

### 5.2 リスクマトリクス

| リスクレベル | スコア | 対応アクション |
|-------------|--------|----------------|
{% for level, details in risk_assessment.risk_matrix.items() %}
| {{ level | upper }} | {{ details.score }} | {{ details.action }} |
{% endfor %}

### 5.3 影響分析チェックリスト

**技術的影響**
- [ ] 影響を受けるシステム/サービスの特定
- [ ] 依存関係の確認
- [ ] パフォーマンスへの影響評価
- [ ] セキュリティへの影響評価
- [ ] データ整合性への影響

**ビジネス影響**
- [ ] 影響を受けるユーザー数
- [ ] ビジネスプロセスへの影響
- [ ] サービス停止時間
- [ ] 財務的影響
- [ ] コンプライアンスへの影響

### 5.4 リスク軽減策

| リスクタイプ | 軽減策 |
|-------------|--------|
| 技術的失敗 | 十分なテスト、段階的実装、ロールバック計画 |
| リソース不足 | 事前のリソース確保、バックアップ要員 |
| 時間超過 | バッファ時間の確保、並行作業の計画 |
| 連携ミス | コミュニケーション計画、ステークホルダー通知 |

---

## 6. 変更実装プロセス

### 6.1 実装前チェックリスト

{% if implementation_process.pre_checklist %}
{% for item in implementation_process.pre_checklist %}
- [ ] {{ item }}
{% endfor %}
{% else %}
- [ ] CAB承認の確認
- [ ] 実装計画書の完成
- [ ] 必要なリソースの確保
- [ ] バックアップの実施
- [ ] ロールバック手順の準備
- [ ] 関係者への通知完了
- [ ] 変更ウィンドウの確認
- [ ] テスト環境での最終確認
{% endif %}

### 6.2 実装手順

1. **実装開始宣言**
   - 変更実施者の確認
   - 開始時刻の記録
   - 関係者への通知

2. **変更実施**
   - 手順書に従った実装
   - 各ステップの確認
   - 問題発生時の即時報告

3. **検証**
   - 機能テスト実施
   - パフォーマンス確認
   - セキュリティチェック

4. **完了確認**
   - すべてのチェック項目のクリア
   - ユーザー確認（必要に応じて）
   - 完了時刻の記録

### 6.3 ロールバック基準

| 状況 | アクション |
|------|-----------|
| 計画時間を50%超過 | ロールバック検討 |
| 重大な機能障害発生 | 即時ロールバック |
| データ不整合検出 | 即時ロールバック |
| セキュリティ問題発見 | 即時ロールバック |
| ビジネス影響拡大 | 緊急協議後判断 |

### 6.4 実装後アクティビティ

1. **即時確認（実装後30分）**
   - サービス正常性確認
   - 監視アラート確認
   - ユーザー問い合わせ状況

2. **短期フォロー（24時間）**
   - パフォーマンス監視
   - インシデント発生状況
   - ユーザーフィードバック

3. **変更レビュー（1週間後）**
   - 目的達成度評価
   - 問題点の洗い出し
   - 改善点の特定
   - 文書更新

---

## 7. 役割と責任

### 7.1 役割定義

{% if roles_responsibilities %}
{% for role in roles_responsibilities %}
#### {{ role.name }}
- **責任**: {{ role.responsibilities | join(', ') }}
- **権限**: {{ role.authorities | join(', ') }}
{% endfor %}
{% else %}
#### 変更マネージャー
- **責任**:
  - 変更管理プロセスの統括
  - CABの運営と招集
  - 変更スケジュールの管理
  - プロセスKPIの監視
  - 利害関係者との調整
- **権限**:
  - 緊急変更の承認
  - CAB開催の決定
  - 変更の延期・中止判断

#### 変更実施者
- **責任**:
  - RFC作成と提出
  - 実装計画の作成
  - 変更の実施
  - テストと検証
  - 文書化
- **権限**:
  - システムへの変更アクセス
  - テスト環境の使用
  - 技術的判断

#### CABメンバー
- **責任**:
  - 変更の評価とレビュー
  - リスク評価への参加
  - 承認/却下の決定
  - 専門知識の提供
- **権限**:
  - 変更の承認/却下投票
  - 追加情報の要求
  - 条件付き承認の設定

#### プロセスオーナー
- **責任**:
  - プロセス設計と改善
  - ポリシーの策定と維持
  - トレーニングの実施
  - 監査対応
- **権限**:
  - プロセス変更の最終承認
  - ツールとテンプレートの選定
  - 例外承認
{% endif %}

### 7.2 RACIマトリクス

| 活動 | 変更実施者 | 変更マネージャー | CAB | ビジネスオーナー |
|------|-----------|----------------|-----|----------------|
| RFC作成 | R/A | C | I | C |
| 影響分析 | R | A | C | C |
| リスク評価 | R | A | C | I |
| CAB評価 | C | A | R | C |
| 承認決定 | I | C | R/A | C |
| 実装 | R/A | I | I | I |
| 検証 | R | A | I | C |
| 変更レビュー | R | A | C | I |

*R: Responsible（実行責任）、A: Accountable（説明責任）、C: Consulted（相談）、I: Informed（情報共有）*

---

## 8. ワークフロー設計

### 8.1 変更ワークフロー

{% if workflow_design.states %}
{{ workflow_design.states }}
{% else %}
```
状態遷移:
[Draft] → [評価中] → [承認待ち] → [承認済み] → [実装予定] 
   ↓         ↓           ↓            ↓            ↓
[取消]    [差戻し]    [却下]      [延期]    [実装中]
                                               ↓
                                          [完了] or [失敗]
                                               ↓
                                          [クローズ]
```

**状態定義**:
- **Draft**: RFC作成中
- **評価中**: 技術評価と影響分析実施中
- **承認待ち**: CAB評価待ち
- **承認済み**: CAB承認取得、実装計画中
- **実装予定**: スケジュール確定、実装待機
- **実装中**: 変更実装作業中
- **完了**: 変更実装成功
- **失敗**: 変更実装失敗またはロールバック
- **クローズ**: 変更レコード完了
{% endif %}

### 8.2 自動化ルール

| トリガー | 条件 | アクション |
|----------|------|-----------|
| RFC提出 | 必須項目入力完了 | 変更タイプ自動判定 |
| 標準変更判定 | 事前承認リスト一致 | 自動承認、実装スケジュール |
| CAB前日 | 承認待ちRFC存在 | アジェンダ自動生成・配信 |
| 承認 | CAB承認完了 | 実装者への通知 |
| 実装予定日 | 24時間前 | リマインダー送信 |
| 実装完了 | ステータス更新 | 影響CI自動更新 |

### 8.3 通知設計

| イベント | 通知先 | 方法 | タイミング |
|----------|--------|------|------------|
| RFC作成 | 変更マネージャー | メール | 即時 |
| 評価要請 | 技術評価者 | メール+チケット | 即時 |
| CAB招集 | CABメンバー | メール+カレンダー | 48時間前 |
| 承認/却下 | RFC提出者 | メール | CAB後30分以内 |
| 実装通知 | 影響ユーザー | メール+ポータル | 24時間前 |
| 完了通知 | 関係者全員 | メール | 実装後1時間以内 |

---

## 9. 変更カレンダー

### 9.1 変更ウィンドウ

{% for window in change_windows %}
#### {{ window.window_type }}
- **スケジュール**: {{ window.schedule }}
- **許可される変更**: {{ window.allowed_changes | join(', ') }}
- **必要な承認**: {{ window.approval_required }}

{% endfor %}

### 9.2 変更カレンダー管理

**表示内容**:
- 承認済み変更のスケジュール
- 変更ウィンドウ
- ブラックアウト期間
- リソース割当状況
- 依存関係

**アクセス権限**:
- 閲覧: 全IT部門スタッフ
- 編集: 変更マネージャー、承認された変更実施者
- 承認: 変更マネージャー

### 9.3 競合管理

| 競合タイプ | 検出方法 | 解決方法 |
|-----------|----------|----------|
| 時間競合 | 同一時間帯の変更 | 優先度による調整 |
| リソース競合 | 同一担当者の重複 | スケジュール調整 |
| 技術的競合 | 同一システムへの変更 | 統合または順序調整 |
| ビジネス競合 | ビジネスイベントとの重複 | 変更延期 |

---

## 10. KPIとメトリクス

### 10.1 主要KPI

{% for kpi in kpi_metrics %}
#### {{ kpi.name }}
- **説明**: {{ kpi.description }}
- **目標**: {{ kpi.target }}
- **計算式**: {{ kpi.formula }}

{% endfor %}

### 10.2 運用メトリクス

| メトリクス | 説明 | 測定頻度 | 用途 |
|-----------|------|----------|------|
| RFC提出数 | 期間内のRFC総数 | 週次 | ワークロード分析 |
| 平均承認時間 | RFC提出から承認までの時間 | 月次 | プロセス効率評価 |
| バックログ数 | 未処理RFC数 | 日次 | キャパシティ管理 |
| ロールバック率 | ロールバック実施率 | 月次 | 品質評価 |
| 変更ウィンドウ使用率 | ウィンドウの利用率 | 週次 | キャパシティ計画 |

### 10.3 ダッシュボード設計

```
┌─────────────────────────────────────────┐
│　　　　　変更管理ダッシュボード　　　　　　│
├─────────────┬─────────────┬─────────────┤
│ 今週の変更  │ 成功率      │ 緊急変更    │
│   計画: 25  │   96.5%     │   2件       │
│   完了: 20  │ [▓▓▓▓▓░]   │  (8.0%)     │
├─────────────┴─────────────┴─────────────┤
│　　　　　変更タイプ別分布　　　　　　　　　│
│ 標準: 45%  通常: 40%  緊急: 10%  重大: 5%│
├─────────────────────────────────────────┤
│　　　　　今週の変更カレンダー　　　　　　　│
│ 月 火 水 木 金 土 日                     │
│ 3  5  2  8  4  15 2  [詳細表示]        │
├─────────────────────────────────────────┤
│　　　　失敗/ロールバックトレンド　　　　　　│
│              [グラフ表示]                │
└─────────────────────────────────────────┘
```

### 10.4 レポート体系

**週次レポート**:
- 変更実施状況サマリー
- 失敗/ロールバック分析
- 次週の変更予定
- リスクの高い変更

**月次レポート**:
- KPIダッシュボード
- トレンド分析
- プロセス改善提案
- CAB効率性分析

---

## 11. 他プロセスとの連携

### 11.1 インシデント管理との連携

{% if integration_points %}
{% for integration in integration_points %}
{% if integration.process == "インシデント管理" %}
{{ integration.description }}
{% endif %}
{% endfor %}
{% else %}
**変更→インシデント**:
- 変更実装後の監視強化
- 変更起因インシデントの追跡
- ロールバック判断情報

**インシデント→変更**:
- 緊急変更要求の起票
- インシデント解決のための変更
- 再発防止のための変更
{% endif %}

### 11.2 問題管理との連携

**問題→変更**:
- 根本原因解決のためのRFC
- 既知エラーの恒久対策
- 予防的変更の提案

**変更→問題**:
- 繰り返し失敗する変更の分析
- 変更に関する問題の特定

### 11.3 リリース管理との連携

**相互連携**:
- 大規模変更のリリース計画
- リリースパッケージの調整
- デプロイメント手順の共有
- 共同テスト計画

### 11.4 構成管理（CMDB）との連携

**変更→CMDB**:
- CI情報の自動更新
- 関係性の変更反映
- バージョン情報更新

**CMDB→変更**:
- 影響分析用CI情報
- 依存関係マップ
- 変更履歴参照

### 11.5 サービスレベル管理との連携

**相互影響**:
- SLA影響評価
- 保守ウィンドウ調整
- サービス改善のための変更
- ダウンタイム交渉

---

## 付録

### A. テンプレート集

1. **RFC（変更要求）テンプレート**
2. **影響分析テンプレート**
3. **実装計画書テンプレート**
4. **ロールバック手順書テンプレート**
5. **変更レビュー報告書テンプレート**
6. **CAB議事録テンプレート**

### B. チェックリスト

1. **変更前チェックリスト**
2. **実装チェックリスト**
3. **変更後チェックリスト**
4. **緊急変更チェックリスト**

### C. ガイドライン

1. **リスク評価ガイド**
2. **影響分析実施ガイド**
3. **CAB運営ガイド**
4. **緊急変更実施ガイド**

### D. 用語集

| 用語 | 定義 |
|------|------|
| RFC | Request for Change（変更要求） |
| CAB | Change Advisory Board（変更諮問委員会） |
| ECAB | Emergency CAB（緊急変更諮問委員会） |
| 変更ウィンドウ | 変更実施が許可される時間帯 |
| ブラックアウト | 変更が禁止される期間 |
| ロールバック | 変更前の状態に戻す作業 |
| 標準変更 | 事前承認された低リスクの変更 |

### E. 変更履歴

| バージョン | 日付 | 変更内容 | 変更者 |
|------------|------|----------|--------|
| {{ version }} | {{ created_date | date_format }} | 初版作成 | {{ author.name }} |